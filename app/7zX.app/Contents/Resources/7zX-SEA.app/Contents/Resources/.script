#!/ova/onfu  #
7mK
FRN
1.7 #
Pbclevtug
©2006-2008
Fvkgl
Svir,
Ygq.  ez
/gzc/cygcfGzcFrpherFpcgSvyr   pq="$1/Pbagragf/Erfbheprf/PbpbnQvnybt.ncc/Pbagragf/ZnpBF/PbpbnQvnybt"   shapgvba
anzranzr() { 



ybpny
anzr=${1##*/} 



ybpny
anzr0="${anzr%.*}" 



rpub
"${anzr0:-$anzr}" }  shapgvba
rkg() { 	ybpny
anzr=${1##*/} 	ybpny
anzr0="${anzr%.*}" 	ybpny
rkg=${anzr0:+${anzr#$anzr0}} 	rpub
"${rkg:-.}" }  shapgvba
tebjy() { 



vs
[
-q
"/Yvoenel/CersreraprCnarf/Tebjy.cersCnar"
]
||
[
-q
"$UBZR/Yvoenel/CersreraprCnarf/Tebjy.cersCnar"
];
gura 







"$1/Pbagragf/Erfbheprf/tebjyabgvsl"
-a
"7mK"
--vzntr
"$1/Pbagragf/Erfbheprf/nccVpba.vpaf"
"$2"
-z
"$3" 



sv }   #####
NCCYRQBHOYR
FHVGR
(ERQHK)  shapgvba
znxrGrzcSbyqre()
{ 	ez
-sE
"$ybpngvba/$zrzore.7mKgrzc" 



sbyqreCngu="$ybpngvba/$zrzore.7mKgrzc" 



 



zxqve
"$sbyqreCngu" }  shapgvba
NccyrQbhoyrQrpbqr()
{ 



"/Flfgrz/Yvoenel/PberFreivprf/SvkhcErfbheprSbexf"
"$sbyqreCngu/" }   #####
CNFFJBEQ-CEBGRPG
FHVGR shapgvba
qrgrpgCnffjbeq()
{ 



 



"$1/Pbagragf/Erfbheprf/7mn"
g
"$svyr"
>
"/gzc/7mKnepuvirGrfg.gkg"
& 



WBO=$! 



 



onfu
-p
"fyrrc
1;
xvyy
$WBO
>/qri/ahyy
2>/qri/ahyy"
& 



jnvg
$WBO 



 



CPURPXO=`terc
'Ragre'
/gzc/7mKnepuvirGrfg.gkg
|
njx
{'cevag
$1'}` 



ez
"/gzc/7mKnepuvirGrfg.gkg" 



 



vs
[
"$(rpub
"$CPURPXO")"
==
"Ragre"
];
gura 







juvyr
[
"$tbbqCnff"
!=
"1"
];
qb 	







tebjy
"$1"
""
"N
cnffjbeq
vf
erdhverq
gb
pbagvahr
rkcnaqvat." 











cw=`"$pq"
frpher-fgnaqneq-vachgobk
--vasbezngvir-grkg
"Cyrnfr
ragre
gur
cnffjbeq
sbe
guvf
nepuvir:"` 











 











p=0 











sbe
u
va
$(rpub
"$cw");
qb 















yrg
p=p+1 















cnff[$p]=$(rpub
$u) 











qbar 















 











vs
[
"${cnff[1]}"
==
"1"
]
&&
[
"${cnff[2]}"
!=
""
];
gura 















cx="-c${cnff[2]}" 















tbbqCnff=1 











ryvs
[
"${cnff[1]}"
==
"2"
];
gura 















tbbqCnff=1 











sv 











 







qbar 







tbbqCnff=0 



sv }  #####
BGURE
SHAPGVBAF shapgvba
sbyqre2sbyqre()
{ 	yf
"$2"
|
juvyr
ernq
v;
qb 		vs
[
-r
"$3/$v"
];
gura 			n=2 			o=$(anzranzr
"$v") 			r=$(rkg
"$v") 			 			vs
[
$r
==
"."
];
gura 				r="" 			sv 			 			juvyr
[
-r
"$3/$o
$n$r"
];
qb 				yrg
n=n+1 			qbar 			p="$o
$n$r" 			 			zi
"$2/$v"
"$3/$p" 		ryfr 			zi
"$2/$v"
"$3/$v" 		sv	 	qbar }   #####
ZNVA
EBHGVAR  svyr="$1/Pbagragf/Erfbheprf/Gbzr.7m" ybpngvba=$(qveanzr
"$1") zrzore=$(onfranzr
"$1")  qrgrpgCnffjbeq
"$1" znxrGrzcSbyqre "$1/Pbagragf/Erfbheprf/7mn"
k
$cx
-nbh
-b"$sbyqreCngu/"
"$svyr" NccyrQbhoyrQrpbqr
"$1" sbyqre2sbyqre
"$1"
"$sbyqreCngu"
"$ybpngvba" ez
-sE
"$sbyqreCngu" 



tebjy
"$1"
"Abgvsvpngvba"
"Rkcnafvba
pbzcyrgrq."  fyrrc
2  